{"ast":null,"code":"import{useEffect,useRef}from'react';import{useChatContext}from'../context/ChatContext';import MessageBubble from'./MessageBubble';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatMessages=()=>{const{messageHistory,username}=useChatContext();const messagesEndRef=useRef(null);// ✅ Safely handle messageHistory - ensure it's always an array\nconst messages=Array.isArray(messageHistory)?messageHistory:[];// Auto-scroll to bottom when new messages arrive\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet. Start the conversation!\"})}):messages.map((msg,index)=>/*#__PURE__*/_jsx(MessageBubble,{message:msg,isOwnMessage:msg.username===username},msg._id||msg.id||index)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]});};export default ChatMessages;","map":{"version":3,"names":["useEffect","useRef","useChatContext","MessageBubble","jsx","_jsx","jsxs","_jsxs","ChatMessages","messageHistory","username","messagesEndRef","messages","Array","isArray","_messagesEndRef$curre","current","scrollIntoView","behavior","className","children","length","map","msg","index","message","isOwnMessage","_id","id","ref"],"sources":["C:/Users/skk46/OneDrive/AppData/Desktop/chat-app-full/chat-app/frontend/src/components/ChatMessages.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { useChatContext } from '../context/ChatContext';\r\nimport MessageBubble from './MessageBubble';\r\n\r\nconst ChatMessages = () => {\r\n  const { messageHistory, username } = useChatContext();\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // ✅ Safely handle messageHistory - ensure it's always an array\r\n  const messages = Array.isArray(messageHistory) ? messageHistory : [];\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n      {messages.length === 0 ? (\r\n        <div className=\"flex items-center justify-center h-full text-gray-500\">\r\n          <p>No messages yet. Start the conversation!</p>\r\n        </div>\r\n      ) : (\r\n        messages.map((msg, index) => (\r\n          <MessageBubble\r\n            key={msg._id || msg.id || index}\r\n            message={msg}\r\n            isOwnMessage={msg.username === username}\r\n          />\r\n        ))\r\n      )}\r\n      <div ref={messagesEndRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatMessages;"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,cAAc,KAAQ,wBAAwB,CACvD,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEC,cAAc,CAAEC,QAAS,CAAC,CAAGR,cAAc,CAAC,CAAC,CACrD,KAAM,CAAAS,cAAc,CAAGV,MAAM,CAAC,IAAI,CAAC,CAEnC;AACA,KAAM,CAAAW,QAAQ,CAAGC,KAAK,CAACC,OAAO,CAACL,cAAc,CAAC,CAAGA,cAAc,CAAG,EAAE,CAEpE;AACAT,SAAS,CAAC,IAAM,KAAAe,qBAAA,CACd,CAAAA,qBAAA,CAAAJ,cAAc,CAACK,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,mBACEL,KAAA,QAAKY,SAAS,CAAC,sCAAsC,CAAAC,QAAA,EAClDR,QAAQ,CAACS,MAAM,GAAK,CAAC,cACpBhB,IAAA,QAAKc,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpEf,IAAA,MAAAe,QAAA,CAAG,0CAAwC,CAAG,CAAC,CAC5C,CAAC,CAENR,QAAQ,CAACU,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACtBnB,IAAA,CAACF,aAAa,EAEZsB,OAAO,CAAEF,GAAI,CACbG,YAAY,CAAEH,GAAG,CAACb,QAAQ,GAAKA,QAAS,EAFnCa,GAAG,CAACI,GAAG,EAAIJ,GAAG,CAACK,EAAE,EAAIJ,KAG3B,CACF,CACF,cACDnB,IAAA,QAAKwB,GAAG,CAAElB,cAAe,CAAE,CAAC,EACzB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}